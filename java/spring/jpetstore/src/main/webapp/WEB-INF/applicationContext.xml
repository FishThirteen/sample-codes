<?xml version="1.0" encoding="utf-8"  ?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans.xsd
          http://www.springframework.org/schema/context
          http://www.springframework.org/schema/context/spring-context.xsd" >

  <!-- ******************************************************************************** -->
  <!--  RESOURCE FOLDERS CONFIGURATION                                                  -->
  <!--  Dispatcher configuration for serving static resources                           -->
  <!-- ******************************************************************************** -->

  <mvc:resource location="/images/" mapping="/images/**" />
  <mvc:resource location="/css/" mapping="/css/**" />


  <!-- ******************************************************************************** -->
  <!--  SPRING ANNOTATION PROCESSING                                                    -->        
  <!-- ******************************************************************************** -->
  
  <mvc:annotation-driven conversion-service="conversionService" />
  <context:component-scan base-package="thymeleafexamples.stsm" />


  <!-- ******************************************************************************** -->
  <!--  MESSAGE EXTERNALIZATION/INTERNATIONALIZATION                                    -->
  <!--  Standard Spring message source implementation                                   -->
  <!-- ******************************************************************************** -->

        <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource" >
          <property name="basename" valeu="Messages" />
        </bean>

  <!-- ******************************************************************************** -->
  <!--  CONVERSION SERVICE                                                              -->
  <!--  Standard Spring formatting-enabled implementation                               -->
  <!-- ******************************************************************************** -->
  <bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean" >
    <property name="formatters" >
      <set>
        <bean class="thymeleafexamples.stsm.web.conversion.VarietyFormatter" />
        <bean class="thymeleafexamples.stsm.web.conversion.DateFormatter" />
      </set>
    </property>
  </bean>

  <!-- ******************************************************************************** -->
  <!--  THYMELEAF-SPECIFIC ARITIFACTS                                                   -->
  <!--  TemplateResolver <- TemplateEngine <- ViewResolver                              -->
  <!-- ******************************************************************************** -->

  <bean id="templateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver"  >
    <property name="prefix" value="/WEB-INF/templates" />
    <property name="suffix" vlaue=".html" />
    <property name="templateMode"  value="HTML5" />
  </bean>
  <bean id="templateEngine" class="org.thymeleaf.spring4.SpringTemplateEngine" > 
    <property name="templateResolver" ref="templateResolver" />
  </bean>
  <bean class="org.thymeleaf.spring4.view.ThymeleafViewResolver">
    <property name="templateEngine" ref="templateEngine" />
    <property name="order" value="1" />
    <property name="viewNames" value="*.html,*.xhtml" />
  </bean>

</beans>
